"use strict";(self.webpackChunkmarmoraria_sao_carlos=self.webpackChunkmarmoraria_sao_carlos||[]).push([[488],{488:(X,T,a)=>{a.r(T),a.d(T,{EstadoModule:()=>K});var m=a(6814),r=a(6223),f=a(1365),Z=a(6208),F=a(9862),A=a(4532),v=a(707),u=a(909),_=a(9663),w=a(5609),b=a(3714),O=a(6218),I=a(9653),p=a(5118),M=a(3866),x=a(3904),S=a(3259),h=a(5219),y=a(8645),l=a(9773),c=function(s){return s.CREATE_ESTADO_EVENT="Criar estado",s.EDIT_ESTADO_EVENT="Editar estado",s.VIEW_ESTADO_EVENT="Visualizar estado",s}(c||{}),t=a(4946),C=a(3004),N=a(5619),$=a(8180);let D=(()=>{class s{constructor(){this.estadoDataEmitter$=new N.X(null),this.estadosDatas=[]}setEstadosDatas(e){e&&this.estadoDataEmitter$.next(e)}getEstadoDataEmitter(){return this.estadoDataEmitter$.asObservable()}getEstadosDatas(){return this.estadoDataEmitter$.pipe((0,$.q)(1)).subscribe({next:e=>{e&&(this.estadosDatas=e)}}),this.estadosDatas}static#t=this.\u0275fac=function(o){return new(o||s)};static#e=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function U(s,E){if(1&s){const e=t.EpF();t.TgZ(0,"div")(1,"form",1),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleSubmitAddEstado())}),t.TgZ(2,"div",2),t._UZ(3,"input",3)(4,"input",4),t.TgZ(5,"div",5)(6,"button",6),t._uU(7,"Concluir"),t.qZA()()()()()}if(2&s){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.addEstadoForm)}}function J(s,E){if(1&s){const e=t.EpF();t.TgZ(0,"div")(1,"form",1),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleSubmitEditEstado())}),t.TgZ(2,"div",2),t._UZ(3,"input",3)(4,"input",4),t.TgZ(5,"div",5)(6,"button",6),t._uU(7,"Concluir"),t.qZA()()()()()}if(2&s){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.editEstadoForm)}}let V=(()=>{class s{constructor(e,o,i,n,d,g,k){this.formBuilder=e,this.messageService=o,this.router=i,this.estadoService=n,this.ref=d,this.estadoDTO=g,this.datePipe=k,this.destroy$=new y.x,this.estadoDatas=[],this.estados=[],this.addEstadoForm=this.formBuilder.group({nome:["",r.kI.required],sigla:["",r.kI.required],dataCriacao:[this.getDate()],dataAtualizacao:[""]}),this.editEstadoForm=this.formBuilder.group({nome:["",r.kI.required],sigla:["",r.kI.required],dataCriacao:[this.getDate()],dataAtualizacao:[""]}),this.addEstadoAction=c.CREATE_ESTADO_EVENT,this.editEstadoAction=c.EDIT_ESTADO_EVENT}ngOnInit(){this.estadoAction=this.ref.data,this.estadoAction?.event.action===this.editEstadoAction&&this.estadoAction?.estadoList&&this.getEstadoSelectedDatas(this.estadoAction.event.id)}getDate(){return this.datePipe.transform(new Date,"dd/MM/yyyy HH:mm")||""}handleSubmitAddEstado(){const e=[];if(Object.keys(this.addEstadoForm.controls).forEach(o=>{const i=this.addEstadoForm.get(o);i&&i.invalid&&e.push(o)}),e.length>0){const o=`Os campos ${e.join(", ")} est\xe3o inv\xe1lidos.`;return this.markFormGroupTouched(this.addEstadoForm),void this.messageService.add({severity:"warn",summary:"Aviso",detail:o,life:3e3})}this.estadoService.create(this.addEstadoForm.value).pipe((0,l.R)(this.destroy$)).subscribe({next:o=>{o&&(this.messageService.add({severity:"success",summary:"Sucesso",detail:`O estado ${o.nome} foi criado com sucesso!`,life:2e3}),this.addEstadoForm.reset())},error:o=>{this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao criar estado.",life:2e3}),console.log(o)}})}handleSubmitEditEstado(){const e=[];if(Object.keys(this.editEstadoForm.controls).forEach(i=>{const n=this.editEstadoForm.get(i);n&&n.invalid&&e.push(i)}),e.length>0){const i=`Os campos ${e.join(", ")} est\xe3o inv\xe1lidos.`;return this.markFormGroupTouched(this.editEstadoForm),void this.messageService.add({severity:"warn",summary:"Aviso",detail:i,life:3e3})}this.estadoService.update({id:this.estadoAction.event.id,nome:this.editEstadoForm.value.nome,sigla:this.editEstadoForm.value.sigla}).pipe((0,l.R)(this.destroy$)).subscribe({next:i=>{i&&(this.editEstadoForm.reset(),this.messageService.add({severity:"success",summary:"Sucesso",detail:"O estado foi editado com sucesso!",life:2e3}))},error:i=>{console.log(i),this.editEstadoForm.reset(),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao editar estado",life:2e3})}})}markFormGroupTouched(e){Object.values(e.controls).forEach(o=>{o instanceof r.cw?this.markFormGroupTouched(o):o.markAsTouched()})}getEstadoSelectedDatas(e){if(this.estadoAction&&this.estadoAction.estadoList){const o=this.estadoAction.estadoList;if(o.length>0){const i=o.find(n=>n?.id===e);i&&(this.estadoSelectedDatas=i,this.editEstadoForm.patchValue({nome:i.nome,sigla:i.sigla}))}}}getEstadoDatas(){this.estadoService.findAll().pipe((0,l.R)(this.destroy$)).subscribe({next:e=>{e.length>0&&(this.estadoDatas=e,this.estadoDatas&&this.estadoDTO.setEstadosDatas(this.estadoDatas))}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(o){return new(o||s)(t.Y36(r.qu),t.Y36(h.ez),t.Y36(f.F0),t.Y36(C.s),t.Y36(p.S),t.Y36(D),t.Y36(m.uU))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-estado-form"]],decls:2,vars:2,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"card","flex","flex-column","md:flex-column","gap-3"],["pInputText","","placeholder","Nome","formControlName","nome"],["pInputText","","placeholder","Sigla","formControlName","sigla"],[1,"flex","flex-row","justify-content-center","align-items-center","align-content-center","m-1"],["type","submit",1,"p-button"]],template:function(o,i){1&o&&(t.YNc(0,U,8,1,"div",0),t.YNc(1,J,8,1,"div",0)),2&o&&(t.Q6J("ngIf",i.estadoAction.event.action===i.addEstadoAction),t.xp6(1),t.Q6J("ngIf",i.estadoAction.event.action===i.editEstadoAction))},dependencies:[m.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,b.o]})}return s})();function Y(s,E){if(1&s&&(t.TgZ(0,"div",1)(1,"div",2)(2,"strong"),t._uU(3,"ID:"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",2)(6,"strong"),t._uU(7,"Nome:"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"div",2)(10,"strong"),t._uU(11,"Sigla:"),t.qZA(),t._uU(12),t.qZA()()),2&s){const e=t.oxw();t.xp6(4),t.hij(" ",e.estado.id," "),t.xp6(4),t.hij(" ",e.estado.nome," "),t.xp6(4),t.hij(" ",e.estado.sigla," ")}}let j=(()=>{class s{constructor(e,o){this.ref=e,this.config=o}ngOnInit(){this.estado=this.config.data.estado}close(){this.ref.close()}static#t=this.\u0275fac=function(o){return new(o||s)(t.Y36(p.E7),t.Y36(p.S))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-estado-view"]],decls:1,vars:1,consts:[["class","p-grid p-dir-col",4,"ngIf"],[1,"p-grid","p-dir-col"],[1,"p-col"]],template:function(o,i){1&o&&t.YNc(0,Y,13,3,"div",0),2&o&&t.Q6J("ngIf",i.estado)},dependencies:[m.O5]})}return s})();var R=a(5226),H=a(3066);function P(s,E){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"th",7)(2,"div",8)(3,"div",8),t._uU(4," ID "),t.qZA(),t.TgZ(5,"div",8),t._UZ(6,"p-sortIcon",9)(7,"p-columnFilter",10),t.qZA()()(),t.TgZ(8,"th",11)(9,"div",8)(10,"div",8),t._uU(11," Nome "),t.qZA(),t.TgZ(12,"div",8),t._UZ(13,"p-sortIcon",12)(14,"p-columnFilter",13),t.qZA()()(),t.TgZ(15,"th",14)(16,"div",8)(17,"div",8),t._uU(18," Sigla "),t.qZA(),t.TgZ(19,"div",8),t._UZ(20,"p-sortIcon",15)(21,"p-columnFilter",16),t.qZA()()(),t.TgZ(22,"th")(23,"div",17)(24,"p-button",18),t.NdJ("onClick",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleEstadoEvent(i.createEstadoEvent))}),t.qZA()()()()}2&s&&(t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1))}function z(s,E){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"div",19)(9,"button",20),t.NdJ("click",function(){const n=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.handleEstadoEvent(d.editEstadoEvent,null==n?null:n.id))}),t.qZA(),t.TgZ(10,"button",21),t.NdJ("click",function(){const n=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.handleDeleteEstado(null==n?null:n.id,null==n?null:n.nome))}),t.qZA(),t.TgZ(11,"button",22),t.NdJ("click",function(){const n=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.handleEstadoEvent(d.viewEstadoEvent,null==n?null:n.id))}),t.qZA()()()()}if(2&s){const e=E.$implicit;t.xp6(2),t.Oqu(null==e?null:e.id),t.xp6(2),t.Oqu(null==e?null:e.nome),t.xp6(2),t.Oqu(null==e?null:e.sigla)}}const B=function(){return["nome","login","nivelAcesso"]},L=function(){return{"min-width":"75rem"}};let G=(()=>{class s{constructor(){this.estados=[],this.estadoEvent=new t.vpe,this.deleteEstadoEvent=new t.vpe,this.createEstadoEvent=c.CREATE_ESTADO_EVENT,this.editEstadoEvent=c.EDIT_ESTADO_EVENT,this.viewEstadoEvent=c.VIEW_ESTADO_EVENT}handleEstadoEvent(e,o){void 0!==e&&""!==e&&this.estadoEvent.emit(o&&null!==o?{action:e,id:o}:{action:e})}handleDeleteEstado(e,o){e&&null!==e&&this.deleteEstadoEvent.emit({est_id:e,nome:o})}static#t=this.\u0275fac=function(o){return new(o||s)};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-estado-table"]],inputs:{estados:"estados"},outputs:{estadoEvent:"estadoEvent",deleteEstadoEvent:"deleteEstadoEvent"},decls:7,vars:11,consts:[[1,"grid"],[1,"col-12"],["styleClass","shadow-3 mt-5 text-indigo-400","header","Estados"],["dataKey","id","currentPageReportTemplate","Mostrando {first} de {last} de {totalRecords} estados",3,"value","rows","paginator","responsive","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","selectionChange"],["usersTable",""],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","name"],[1,"flex","justify-content-between","align-itens-center"],["field","id"],["type","text","field","id","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","nome"],["field","nome"],["type","text","field","nome","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","estado"],["field","sigla"],["type","text","field","sigla","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],[1,"flex","justify-content-center"],["styleClass","p-button-info","icon","pi pi-plus","label","Novo","pTooltip","Cadastrar novo estado","tooltipPosition","top",3,"onClick"],[1,"flex","justify-content-center","gap-3","align-itens-center","align-content-center"],["pButton","","pRipple","","icon","pi pi-pencil","pTooltip","Editar estado","tooltipPosition","top",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","pTooltip","Excluir estado","tooltipPosition","top",1,"p-button-rounded","p-button-danger",3,"click"],["pButton","","pRipple","","icon","pi pi-eye","pTooltip","Visualizar estado","tooltipPosition","top",1,"p-button-rounded","p-button-sucess",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p-card",2)(3,"p-table",3,4),t.NdJ("selectionChange",function(d){return i.estadoSelected=d}),t.YNc(5,P,25,9,"ng-template",5),t.YNc(6,z,12,3,"ng-template",6),t.qZA()()()()),2&o&&(t.xp6(3),t.Q6J("value",i.estados)("rows",10)("paginator",!0)("responsive",!0)("globalFilterFields",t.DdM(9,B))("tableStyle",t.DdM(10,L))("selection",i.estadoSelected)("rowHover",!0)("showCurrentPageReport",!0))},dependencies:[A.Z,h.jx,v.Hq,v.zx,u.iA,u.lQ,u.fz,u.xl,S.u]})}return s})();const Q=function(){return{width:"50vw"}},q=[{path:"",component:(()=>{class s{constructor(e,o,i,n,d,g){this.estadoService=e,this.estadoDtransferService=o,this.router=i,this.messageService=n,this.confirmationService=d,this.dialogService=g,this.destroy$=new y.x,this.estadoList=[],this.sidebarVisible=!1}ngOnInit(){this.getServiceEstadosDatas()}getServiceEstadosDatas(){const e=this.estadoDtransferService.getEstadosDatas();e.length>0?this.estadoList=e:this.getAPIEstadosDatas()}getAPIEstadosDatas(){this.estadoService.findAll().pipe((0,l.R)(this.destroy$)).subscribe({next:e=>{e.length>0&&(this.estadoList=e)},error:e=>{console.log(e),this.router.navigate(["home"]),this.messageService.add({severity:"error",summary:"Erro.",detail:"Erro ao buscar estados",life:2500})}})}handleEstadoAction(e){e.action===c.CREATE_ESTADO_EVENT||e.action===c.EDIT_ESTADO_EVENT?(this.ref=this.dialogService.open(V,{header:e?.action,width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0,data:{event:e,estadoList:this.estadoList}}),this.ref.onClose.pipe((0,l.R)(this.destroy$)).subscribe({next:()=>this.getAPIEstadosDatas()})):this.handleViewEstadoAction(e)}handleOpenSidebar(){this.sidebarVisible=!this.sidebarVisible}handleDeleteEstadoAction(e){e&&this.confirmationService.confirm({message:`Deseja realmente deletar o estado ${e?.nome}?`,header:"Confirma\xe7\xe3o de exclus\xe3o",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"N\xe3o",accept:()=>this.deleteEstado(e?.est_id)})}handleViewEstadoAction(e){e&&this.estadoService.findById(e?.id).pipe((0,l.R)(this.destroy$)).subscribe({next:o=>{o&&(this.ref=this.dialogService.open(j,{header:e?.action,width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0,data:{estado:o}}),this.ref.onClose.pipe((0,l.R)(this.destroy$)).subscribe({next:()=>this.getAPIEstadosDatas()}))},error(o){console.log(o)}})}deleteEstado(e){e&&this.estadoService.delete(e).pipe((0,l.R)(this.destroy$)).subscribe({next:o=>{this.getAPIEstadosDatas(),this.messageService.add({severity:"success",summary:"Sucesso",detail:"Estado Excluido com sucesso!",life:2500})},error:o=>{console.log(o),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao excluir estado",life:2500})}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(o){return new(o||s)(t.Y36(C.s),t.Y36(D),t.Y36(f.F0),t.Y36(h.ez),t.Y36(h.YP),t.Y36(p.xA))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-estado-home"]],decls:4,vars:5,consts:[[3,"openSidebarEvent"],[3,"sidebarVisible"],[3,"estados","estadoEvent","deleteEstadoEvent"]],template:function(o,i){1&o&&(t.TgZ(0,"app-toolbar",0),t.NdJ("openSidebarEvent",function(){return i.handleOpenSidebar()}),t.qZA(),t._UZ(1,"app-side-bar",1),t.TgZ(2,"app-estado-table",2),t.NdJ("estadoEvent",function(d){return i.handleEstadoAction(d)})("deleteEstadoEvent",function(d){return i.handleDeleteEstadoAction(d)}),t.qZA(),t._UZ(3,"p-confirmDialog")),2&o&&(t.xp6(1),t.Q6J("sidebarVisible",i.sidebarVisible),t.xp6(1),t.Q6J("estados",i.estadoList),t.xp6(1),t.Akn(t.DdM(4,Q)))},dependencies:[R.n,H.P,x.Q,G]})}return s})()}];let K=(()=>{class s{static#t=this.\u0275fac=function(o){return new(o||s)};static#e=this.\u0275mod=t.oAB({type:s});static#o=this.\u0275inj=t.cJS({providers:[p.xA,h.YP,m.uU],imports:[m.ez,r.u5,r.UX,f.Bz.forChild(q),Z.m,F.JF,A.d,v.hJ,u.U$,_.zz,w.Iu,b.j,O.A,I.L$,p.DL,M.kW,x.D,S.z]})}return s})()}}]);