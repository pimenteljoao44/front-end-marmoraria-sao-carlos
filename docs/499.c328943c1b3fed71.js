"use strict";(self.webpackChunkmarmoraria_sao_carlos=self.webpackChunkmarmoraria_sao_carlos||[]).push([[499],{499:(he,T,s)=>{s.r(T),s.d(T,{ClientesModule:()=>pe});var u=s(6814),x=s(3259),A=s(3904),F=s(3866),m=s(5118),w=s(9653),N=s(6218),I=s(3714),P=s(5609),M=s(9663),h=s(909),f=s(707),Z=s(4532),g=s(9862),_=s(5219),v=s(1365),a=s(6223),E=s(8645),c=s(9773),p=function(l){return l.CREATE_CLIENT_EVENT="Criar cliente",l.EDIT_CLIENT_EVENT="Editar cliente",l.VIEW_CLIENT_EVENT="Visualizar cliente",l}(p||{}),e=s(4946),J=s(3004),D=s(2098),U=s(553),O=s(459);let y=(()=>{class l{constructor(t,i){this.httpClient=t,this.cookieService=i,this.baseUrl=U.N.baseUrl,this.JWT_TOKEN=this.cookieService.get("USER_INFO")}get httpOptions(){return{headers:new g.WM({"Content-Type":"application/json",Authorization:`Bearer ${this.JWT_TOKEN}`})}}findAll(){return this.httpClient.get(`${this.baseUrl}/clientes`,this.httpOptions)}findById(t){return this.httpClient.get(`${this.baseUrl}/clientes/${t}`,this.httpOptions)}create(t){return this.httpClient.post(`${this.baseUrl}/clientes`,t,this.httpOptions)}update(t){return this.httpClient.put(`${this.baseUrl}/clientes/${t?.id}`,t,this.httpOptions)}delete(t){return this.httpClient.delete(`${this.baseUrl}/clientes/${t}`,this.httpOptions)}static#e=this.\u0275fac=function(i){return new(i||l)(e.LFG(g.eN),e.LFG(O.N))};static#t=this.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();var k=s(5619),q=s(8180);let S=(()=>{class l{constructor(){this.clientesDataEmitter$=new k.X(null),this.clientesDatas=[]}setClientesDatas(t){t&&this.clientesDataEmitter$.next(t)}getClientesDataEmitter(){return this.clientesDataEmitter$.asObservable()}getClientesDatas(){return this.clientesDataEmitter$.pipe((0,q.q)(1)).subscribe({next:t=>{t&&(this.clientesDatas=t)}}),this.clientesDatas}static#e=this.\u0275fac=function(i){return new(i||l)};static#t=this.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();var b=s(1865);function V(l,d){if(1&l){const t=e.EpF();e.TgZ(0,"input",22),e.NdJ("input",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.formatarCPF(n,o.addClientForm))})("keyup",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.formatarCPF(n,o.addClientForm))})("keydown",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.formatarCPF(n,o.addClientForm))}),e.qZA()}}function $(l,d){if(1&l){const t=e.EpF();e.TgZ(0,"input",23),e.NdJ("input",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.formatarRG(n,o.addClientForm))})("keyup",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.formatarRG(n,o.addClientForm))})("keydown",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.formatarRG(n,o.addClientForm))}),e.qZA()}}function G(l,d){if(1&l){const t=e.EpF();e.TgZ(0,"input",24),e.NdJ("input",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.formatarCNPJ(n,o.addClientForm))})("keyup",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.formatarCNPJ(n,o.addClientForm))})("keydown",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.formatarCNPJ(n,o.addClientForm))}),e.qZA()}}function B(l,d){if(1&l){const t=e.EpF();e.TgZ(0,"div")(1,"form",1),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.handleSubmitAddClient())}),e.TgZ(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Pessoa F\xedsica"),e.qZA(),e.TgZ(6,"p-radioButton",5),e.NdJ("onClick",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onTipoPessoaChange(n.addClientForm))}),e.qZA(),e.TgZ(7,"label",6),e._uU(8,"Pessoa Jur\xeddica"),e.qZA(),e.TgZ(9,"p-radioButton",7),e.NdJ("onClick",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onTipoPessoaChange(n.addClientForm))}),e.qZA()(),e._UZ(10,"input",8)(11,"input",9),e.YNc(12,V,1,0,"input",10),e.YNc(13,$,1,0,"input",11),e.YNc(14,G,1,0,"input",12),e.TgZ(15,"div",13),e._UZ(16,"input",14)(17,"input",15)(18,"input",16)(19,"input",17),e.TgZ(20,"div",18)(21,"p-dropdown",19),e.NdJ("onChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.onCidadeChange(n.value))}),e.qZA()()(),e.TgZ(22,"div",20)(23,"button",21),e._uU(24,"Concluir"),e.qZA()()()()()}if(2&l){const t=e.oxw();let i,n,o;e.xp6(1),e.Q6J("formGroup",t.addClientForm),e.xp6(11),e.Q6J("ngIf","PESSOA_FISICA"===(null==(i=t.addClientForm.get("tipoPessoa"))?null:i.value)),e.xp6(1),e.Q6J("ngIf","PESSOA_FISICA"===(null==(n=t.addClientForm.get("tipoPessoa"))?null:n.value)),e.xp6(1),e.Q6J("ngIf","PESSOA_JURIDICA"===(null==(o=t.addClientForm.get("tipoPessoa"))?null:o.value)),e.xp6(7),e.Q6J("options",t.cidades)}}function R(l,d){if(1&l){const t=e.EpF();e.TgZ(0,"input",22),e.NdJ("input",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.formatarCPF(n,o.editClientForm))})("keyup",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.formatarCPF(n,o.editClientForm))})("keydown",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.formatarCPF(n,o.editClientForm))}),e.qZA()}}function j(l,d){if(1&l){const t=e.EpF();e.TgZ(0,"input",23),e.NdJ("input",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.formatarRG(n,o.editClientForm))})("keyup",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.formatarRG(n,o.editClientForm))})("keydown",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.formatarRG(n,o.editClientForm))}),e.qZA()}}function H(l,d){1&l&&e._UZ(0,"input",26)}function Y(l,d){if(1&l){const t=e.EpF();e.TgZ(0,"div")(1,"form",1),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.handleSubmitEditClient())}),e.TgZ(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Pessoa F\xedsica"),e.qZA(),e.TgZ(6,"p-radioButton",5),e.NdJ("onClick",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onTipoPessoaChange(n.editClientForm))}),e.qZA(),e.TgZ(7,"label",6),e._uU(8,"Pessoa Jur\xeddica"),e.qZA(),e.TgZ(9,"p-radioButton",7),e.NdJ("onClick",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onTipoPessoaChange(n.editClientForm))}),e.qZA()(),e._UZ(10,"input",8)(11,"input",9),e.YNc(12,R,1,0,"input",10),e.YNc(13,j,1,0,"input",11),e.YNc(14,H,1,0,"input",25),e.TgZ(15,"div",13),e._UZ(16,"input",14)(17,"input",15)(18,"input",16)(19,"input",17),e.TgZ(20,"div",18)(21,"p-dropdown",19),e.NdJ("onChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.onCidadeChange(n.value))}),e.qZA()()(),e.TgZ(22,"div",20)(23,"button",21),e._uU(24,"Concluir"),e.qZA()()()()()}if(2&l){const t=e.oxw();let i,n,o;e.xp6(1),e.Q6J("formGroup",t.editClientForm),e.xp6(11),e.Q6J("ngIf","PESSOA_FISICA"===(null==(i=t.editClientForm.get("tipoPessoa"))?null:i.value)),e.xp6(1),e.Q6J("ngIf","PESSOA_FISICA"===(null==(n=t.editClientForm.get("tipoPessoa"))?null:n.value)),e.xp6(1),e.Q6J("ngIf","PESSOA_JURIDICA"===(null==(o=t.editClientForm.get("tipoPessoa"))?null:o.value)),e.xp6(7),e.Q6J("options",t.cidades)}}let Q=(()=>{class l{updateValidators(t){const i=t.get("tipoPessoa")?.value,n=t.get("cpf"),o=t.get("cnpj"),r=t.get("rg");n?.clearValidators(),o?.clearValidators(),r?.clearValidators(),"PESSOA_FISICA"===i?(n?.setValidators([a.kI.required,a.kI.pattern(/^\d{3}\.\d{3}\.\d{3}-\d{2}$/)]),o?.setValue(""),r?.setValue("")):"PESSOA_JURIDICA"===i&&(o?.setValidators([a.kI.required,a.kI.pattern(/^\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$/)]),n?.setValue(""),r?.setValue("")),n?.updateValueAndValidity(),o?.updateValueAndValidity(),r?.updateValueAndValidity()}formatarRG(t,i){const n=t.target.value.replace(/\D/g,"");let o="";o=n.length<=9?n.replace(/(\d{2})(\d{3})(\d{3})/,"$1.$2.$3"):n.substring(0,9),i.get("rg")?.setValue(o)}formatarCPF(t,i){const n=t.target.value.replace(/\D/g,"");let o="";o=n.length<=11?n.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):n.substring(0,14),i.get("cpf")?.setValue(o)}formatarCNPJ(t,i){const n=t.target.value.replace(/\D/g,"");let o="";o=n.length<=14?n.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):n.substring(0,18),i.get("cnpj")?.setValue(o)}onTipoPessoaChange(t){this.updateValidators(t)}onCidadeChange(t){this.cidadeService.findById(t).pipe((0,c.R)(this.destroy$)).subscribe({next:i=>{i&&(this.cidadeSelecionada=i)},error(i){console.log(i)}}),this.estadoService.findById(this.cidadeSelecionada?.estado?.id).subscribe({next:i=>{this.cidadeSelecionada.estado=i},error:i=>{console.error("Erro ao buscar o estado associado:",i)}})}constructor(t,i,n,o,r,C,ue,me,Ce){this.formBuilder=t,this.messageService=i,this.router=n,this.estadoService=o,this.cidadeService=r,this.clientService=C,this.ref=ue,this.datePipe=me,this.clienteDTO=Ce,this.destroy$=new E.x,this.tipoPessoa=[{label:"Pessoa F\xedsica",value:"PESSOA_FISICA"},{label:"Pessoa Jur\xeddica",value:"PESSOA_JURIDICA"}],this.TipoPessoaSelected=[],this.clienteDatas=[],this.cidades=[],this.addClientAction=p.CREATE_CLIENT_EVENT,this.editClientAction=p.EDIT_CLIENT_EVENT,this.addClientForm=this.formBuilder.group({nome:["",a.kI.required],telefone:["",a.kI.required],endereco:this.formBuilder.group({rua:["",a.kI.required],numero:["",a.kI.required],complemento:[""],bairro:["",a.kI.required],cidade:this.formBuilder.group({cidId:[null,a.kI.required],nome:["",a.kI.required],estado:this.formBuilder.group({id:[null],nome:[""],sigla:[""],cidades:[[]],dataCriacao:[this.getDate()],dataAtualizacao:[""]})})}),cpf:[""],rg:[""],cnpj:[""],tipoPessoa:["PESSOA_FISICA",a.kI.required],dataCriacao:[this.getDate(),a.kI.required],dataAtualizacao:[""]}),this.editClientForm=this.formBuilder.group({id:[null],nome:["",a.kI.required],telefone:["",a.kI.required],endereco:this.formBuilder.group({rua:["",a.kI.required],numero:["",a.kI.required],complemento:[""],bairro:["",a.kI.required],cidade:this.formBuilder.group({cidId:[null,a.kI.required],nome:["",a.kI.required],estado:this.formBuilder.group({id:[null],nome:[""],sigla:[""],cidades:[[]],dataCriacao:[this.getDate()],dataAtualizacao:[""]})})}),cpf:[""],rg:[""],cnpj:[""],tipoPessoa:["PESSOA_FISICA",a.kI.required],dataCriacao:[this.getDate()],dataAtualizacao:[""]})}ngOnInit(){if(this.onTipoPessoaChange(this.addClientForm),this.onTipoPessoaChange(this.editClientForm),this.clientAction=this.ref.data,this.clientAction?.event.action===this.editClientAction&&this.clientAction?.clientesList){const t=this.clientAction?.event?.id;this.getClientSelectedDatas(t),this.setCidadeNosFormularios(this.cidadeSelecionada),this.updateValidators(this.editClientForm)}this.getCidades()}setCidadeNosFormularios(t){const i=this.addClientForm.get("endereco"),n=this.editClientForm.get("endereco"),o=t.cidId;i.get("cidade.cidId")?.setValue(o),i.get("cidade.nome")?.setValue(t?.nome),i.get("cidade.estado.id")?.setValue(t?.estado?.id),n.get("cidade.cidId")?.setValue(o),n.get("cidade.nome")?.setValue(t?.nome),n.get("cidade.estado.id")?.setValue(t?.estado?.id);const r=this.getDate();i.get("cidade.estado.dataCriacao")?.setValue(r),n.get("cidade.estado.dataCriacao")?.setValue(r)}getDate(){return this.datePipe.transform(new Date,"dd/MM/yyyy HH:mm")||""}getCidades(){this.cidadeService.findAll().pipe((0,c.R)(this.destroy$)).subscribe({next:t=>{t.length>0&&(this.cidades=t,this.cidades.length>0&&(this.cidadeSelecionada=this.cidades[0],this.setCidadeNosFormularios(this.cidadeSelecionada)))},error:t=>{console.log(t)}})}handleSubmitAddClient(){const t=[];if(Object.keys(this.addClientForm.controls).forEach(i=>{const n=this.addClientForm.get(i);n&&n.invalid&&t.push(i)}),t.length>0){const i=`Os campos ${t.join(", ")} est\xe3o inv\xe1lidos.`;return this.markFormGroupTouched(this.addClientForm),void this.messageService.add({severity:"warn",summary:"Aviso",detail:i,life:3e3})}this.clientService.create(this.addClientForm.value).pipe((0,c.R)(this.destroy$)).subscribe({next:i=>{i&&(this.addClientForm.reset(),this.messageService.add({severity:"success",summary:"Sucesso",detail:`O cliente ${i.nome} foi criado com sucesso!`,life:2e3}))},error:i=>{console.error("Erro durante a solicita\xe7\xe3o:",i),"Cliente j\xe1 cadastrado na base de dados!"!==i.error.error?(this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao criar Cliente.",life:2e3}),console.log(i)):this.messageService.add({severity:"error",summary:"Erro",detail:i.error.error,life:2e3})}})}handleSubmitEditClient(){const t=[];if(Object.keys(this.editClientForm.controls).forEach(r=>{const C=this.editClientForm.get(r);C&&C.invalid&&t.push(r)}),t.length>0){const r=`Os campos ${t.join(", ")} est\xe3o inv\xe1lidos.`;return this.markFormGroupTouched(this.editClientForm),void this.messageService.add({severity:"warn",summary:"Aviso",detail:r,life:3e3})}this.setCidadeNosFormularios(this.cidadeSelecionada);const i=this.datePipe.transform(new Date,"dd/MM/yyyy HH:mm"),n=this.editClientForm.value.endereco;this.clientService.update({id:this.clientAction.event.id,nome:this.editClientForm.value.nome,telefone:this.editClientForm.value.telefone,endereco:{rua:n.rua,numero:n.numero,complemento:n.complemento,bairro:n.bairro,cidade:{cidId:this.cidadeSelecionada.cidId}},cpf:this.editClientForm.value.cpf,rg:this.editClientForm.value.rg,cnpj:this.editClientForm.value.cnpj,tipoPessoa:this.editClientForm.value.tipoPessoa,dataCriacao:this.editClientForm.value.dataCriacao,dataAtualizacao:null!==i?i:void 0}).pipe((0,c.R)(this.destroy$)).subscribe({next:r=>{r&&(this.messageService.add({severity:"success",summary:"Sucesso",detail:"O cliente foi editado com sucesso!",life:2e3}),this.editClientForm.reset())},error:r=>{console.log(r),this.messageService.add({severity:"error",summary:"Erro",detail:`Erro ao editar cliente, ${r.error.error}`,life:2e3})}})}markFormGroupTouched(t){Object.values(t.controls).forEach(i=>{i instanceof a.cw?this.markFormGroupTouched(i):i.markAsTouched()})}getClientSelectedDatas(t){const i=this.clientAction.clientesList;if(i.length>0){const n=i.find(o=>o?.id===t);n&&(this.clienteSelectedDatas=n,this.cidadeSelecionada=n.endereco.cidade,this.editClientForm.patchValue({id:n.id,nome:n.nome,telefone:n.telefone,cpf:n.cpf,rg:n.rg,cnpj:n.cnpj,tipoPessoa:n.tipoPessoa,dataCriacao:n.dataCriacao,dataAtualizacao:n.dataAtualizacao,endereco:{rua:n.endereco.rua,numero:n.endereco.numero,complemento:n.endereco.complemento,bairro:n.endereco.bairro,cidade:{cidId:n.endereco.cidade.cidId}}}),this.editClientForm.updateValueAndValidity())}}setUserDatas(){this.clientService.findAll().pipe((0,c.R)(this.destroy$)).subscribe({next:t=>{t.length>0&&(this.clienteDatas=t,this.clienteDatas&&this.clienteDTO.setClientesDatas(this.clienteDatas))}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(i){return new(i||l)(e.Y36(a.qu),e.Y36(_.ez),e.Y36(v.F0),e.Y36(J.s),e.Y36(D.F),e.Y36(y),e.Y36(m.S),e.Y36(u.uU),e.Y36(S))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-cliente-form"]],decls:2,vars:2,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"card","flex","flex-column","md:flex-column","gap-3"],[1,"p-field","flex","flex-row","justify-content-center","align-items-center","align-content-center","m-1"],["for","pessoaFisica",1,"mr-3"],["inputId","pessoaFisica","name","tipoPessoa","value","PESSOA_FISICA","formControlName","tipoPessoa",1,"mr-5","p-radiobutton",3,"onClick"],["for","pessoaJuridica",1,"mr-3"],["inputId","pessoaJuridica","name","tipoPessoa","value","PESSOA_JURIDICA","formControlName","tipoPessoa",1,"p-radiobutton",3,"onClick"],["pInputText","","placeholder","Nome","formControlName","nome"],["pInputText","","placeholder","Telefone","formControlName","telefone"],["pInputText","","placeholder","CPF","formControlName","cpf",3,"input","keyup","keydown",4,"ngIf"],["pInputText","","placeholder","RG","formControlName","rg",3,"input","keyup","keydown",4,"ngIf"],["pInputText","","placeholder","CNPJ","formControlName","cnpj",3,"input","keyup","keydown",4,"ngIf"],["formGroupName","endereco"],["pInputText","","placeholder","Rua","formControlName","rua"],["pInputText","","placeholder","N\xfamero","formControlName","numero"],["pInputText","","placeholder","Complemento","formControlName","complemento"],["pInputText","","placeholder","Bairro","formControlName","bairro"],["formGroupName","cidade"],["styleClass","w-full","placeholder","Selecione a cidade","formControlName","cidId","optionLabel","nome","optionValue","cidId",3,"options","onChange"],[1,"flex","flex-row","justify-content-center","align-items-center","align-content-center","m-1"],["type","submit",1,"p-button"],["pInputText","","placeholder","CPF","formControlName","cpf",3,"input","keyup","keydown"],["pInputText","","placeholder","RG","formControlName","rg",3,"input","keyup","keydown"],["pInputText","","placeholder","CNPJ","formControlName","cnpj",3,"input","keyup","keydown"],["pInputText","","placeholder","CNPJ","formControlName","cnpj",4,"ngIf"],["pInputText","","placeholder","CNPJ","formControlName","cnpj"]],template:function(i,n){1&i&&(e.YNc(0,B,25,5,"div",0),e.YNc(1,Y,25,5,"div",0)),2&i&&(e.Q6J("ngIf",n.clientAction.event.action===n.addClientAction),e.xp6(1),e.Q6J("ngIf",n.clientAction.event.action===n.editClientAction))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,a.x0,b.EU,I.o,F.Lt]})}return l})();function K(l,d){if(1&l&&(e.TgZ(0,"div",2)(1,"strong"),e._uU(2,"CPF:"),e.qZA(),e._uU(3),e.qZA()),2&l){const t=e.oxw(2);e.xp6(3),e.hij(" ",t.cliente.cpf," ")}}function L(l,d){if(1&l&&(e.TgZ(0,"div",2)(1,"strong"),e._uU(2,"RG:"),e.qZA(),e._uU(3),e.qZA()),2&l){const t=e.oxw(2);e.xp6(3),e.hij(" ",t.cliente.rg," ")}}function z(l,d){if(1&l&&(e.TgZ(0,"div",2)(1,"strong"),e._uU(2,"CNPJ:"),e.qZA(),e._uU(3),e.qZA()),2&l){const t=e.oxw(2);e.xp6(3),e.hij(" ",t.cliente.cnpj," ")}}function W(l,d){if(1&l&&(e.TgZ(0,"div",1)(1,"div",2)(2,"strong"),e._uU(3,"ID:"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"div",2)(6,"strong"),e._uU(7,"Tipo:"),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"div",2)(10,"strong"),e._uU(11,"Nome:"),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"div",2)(14,"strong"),e._uU(15,"Telefone:"),e.qZA(),e._uU(16),e.qZA(),e.TgZ(17,"div",2)(18,"strong"),e._uU(19,"Endere\xe7o:"),e.qZA(),e._uU(20),e.qZA(),e.YNc(21,K,4,1,"div",3),e.YNc(22,L,4,1,"div",3),e.YNc(23,z,4,1,"div",3),e.qZA()),2&l){const t=e.oxw();e.xp6(4),e.hij(" ",t.cliente.id," "),e.xp6(4),e.hij(" ","PESSOA_FISICA"===t.cliente.tipoPessoa?"Pessoa F\xedsica":"Pessoa Jur\xeddica"," "),e.xp6(4),e.hij(" ",t.cliente.nome," "),e.xp6(4),e.hij(" ",t.cliente.telefone," "),e.xp6(4),e.gL8(" ",t.cliente.endereco.rua,", ",t.cliente.endereco.numero," - ",t.cliente.endereco.complemento,", ",t.cliente.endereco.bairro,", ",t.cliente.endereco.cidade.nome,", ",null==t.cliente.endereco.cidade.estado?null:t.cliente.endereco.cidade.estado.nome," "),e.xp6(1),e.Q6J("ngIf","PESSOA_FISICA"===t.cliente.tipoPessoa),e.xp6(1),e.Q6J("ngIf","PESSOA_FISICA"===t.cliente.tipoPessoa),e.xp6(1),e.Q6J("ngIf","PESSOA_JURIDICA"===t.cliente.tipoPessoa)}}let X=(()=>{class l{constructor(t,i){this.ref=t,this.config=i}ngOnInit(){this.cliente=this.config.data.cliente}close(){this.ref.close()}static#e=this.\u0275fac=function(i){return new(i||l)(e.Y36(m.E7),e.Y36(m.S))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-cliente-view"]],decls:1,vars:1,consts:[["class","p-grid p-dir-col",4,"ngIf"],[1,"p-grid","p-dir-col"],[1,"p-col"],["class","p-col",4,"ngIf"]],template:function(i,n){1&i&&e.YNc(0,W,24,13,"div",0),2&i&&e.Q6J("ngIf",n.cliente)},dependencies:[u.O5]})}return l})();var ee=s(5226),te=s(3066);function ne(l,d){if(1&l){const t=e.EpF();e.TgZ(0,"tr")(1,"th",7)(2,"div",8)(3,"div",8),e._uU(4," ID "),e.qZA(),e.TgZ(5,"div",8),e._UZ(6,"p-sortIcon",9)(7,"p-columnFilter",10),e.qZA()()(),e.TgZ(8,"th",11)(9,"div",8)(10,"div",8),e._uU(11," Nome "),e.qZA(),e.TgZ(12,"div",8),e._UZ(13,"p-sortIcon",12)(14,"p-columnFilter",13),e.qZA()()(),e.TgZ(15,"th",14)(16,"div",8)(17,"div",8),e._uU(18," Telefone "),e.qZA(),e.TgZ(19,"div",8),e._UZ(20,"p-sortIcon",15)(21,"p-columnFilter",16),e.qZA()()(),e.TgZ(22,"th",17)(23,"div",8)(24,"div",8),e._uU(25," Rua "),e.qZA(),e.TgZ(26,"div",8),e._UZ(27,"p-sortIcon",18)(28,"p-columnFilter",19),e.qZA()()(),e.TgZ(29,"th",20)(30,"div",8)(31,"div",8),e._uU(32," RG "),e.qZA(),e.TgZ(33,"div",8),e._UZ(34,"p-sortIcon",21)(35,"p-columnFilter",22),e.qZA()()(),e.TgZ(36,"th",23)(37,"div",8)(38,"div",8),e._uU(39," CPF "),e.qZA(),e.TgZ(40,"div",8),e._UZ(41,"p-sortIcon",24)(42,"p-columnFilter",25),e.qZA()()(),e.TgZ(43,"th",26)(44,"div",8)(45,"div",8),e._uU(46," Complemento "),e.qZA(),e.TgZ(47,"div",8),e._UZ(48,"p-sortIcon",27)(49,"p-columnFilter",28),e.qZA()()(),e.TgZ(50,"th",29)(51,"div",8)(52,"div",8),e._uU(53," Cidade "),e.qZA(),e.TgZ(54,"div",8),e._UZ(55,"p-sortIcon",30)(56,"p-columnFilter",31),e.qZA()()(),e.TgZ(57,"th")(58,"div",32)(59,"p-button",33),e.NdJ("onClick",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.handleClientEvent(n.createClienteEvent))}),e.qZA()()()()}2&l&&(e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1))}function ie(l,d){if(1&l&&(e.ynx(0),e._uU(1),e._UZ(2,"br"),e.BQk()),2&l){const t=e.oxw().$implicit;e.xp6(1),e.HOy(" ",null==t||null==t.endereco?null:t.endereco.rua," ",null==t||null==t.endereco?null:t.endereco.numero," ",null==t||null==t.endereco?null:t.endereco.complemento," ",null==t||null==t.endereco?null:t.endereco.bairro," ")}}function oe(l,d){if(1&l){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e.YNc(8,ie,3,4,"ng-container",34),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td")(18,"div",35)(19,"button",36),e.NdJ("click",function(){const o=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.handleClientEvent(r.editClienteEvent,null==o?null:o.id))}),e.qZA(),e.TgZ(20,"button",37),e.NdJ("click",function(){const o=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.handleDeleteClient(null==o?null:o.id,null==o?null:o.nome))}),e.qZA(),e.TgZ(21,"button",38),e.NdJ("click",function(){const o=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.handleClientEvent(r.viewClientEvent,null==o?null:o.id))}),e.qZA()()()()}if(2&l){const t=d.$implicit;e.xp6(2),e.Oqu(null==t?null:t.id),e.xp6(2),e.Oqu(null==t?null:t.nome),e.xp6(2),e.Oqu(null==t?null:t.telefone),e.xp6(2),e.Q6J("ngIf",null!==(null==t?null:t.endereco)),e.xp6(2),e.Oqu(null==t?null:t.rg),e.xp6(2),e.Oqu(null==t?null:t.cpf),e.xp6(2),e.Oqu(null==t||null==t.endereco?null:t.endereco.complemento),e.xp6(2),e.Oqu(null==t||null==t.endereco||null==t.endereco.cidade?null:t.endereco.cidade.nome)}}const le=function(){return["nome","rua","cpf","rg","cidade","complemento"]},re=function(){return{"min-width":"75rem"}};let se=(()=>{class l{constructor(){this.clientes=[],this.clienteEvent=new e.vpe,this.deleteClientEvent=new e.vpe,this.createClienteEvent=p.CREATE_CLIENT_EVENT,this.editClienteEvent=p.EDIT_CLIENT_EVENT,this.viewClientEvent=p.VIEW_CLIENT_EVENT}handleClientEvent(t,i){void 0!==t&&""!==t&&this.clienteEvent.emit(i&&null!==i?{action:t,id:i}:{action:t})}handleDeleteClient(t,i){t&&null!==t&&this.deleteClientEvent.emit({cli_id:t,nome:i})}static#e=this.\u0275fac=function(i){return new(i||l)};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-clientes-table"]],inputs:{clientes:"clientes"},outputs:{clienteEvent:"clienteEvent",deleteClientEvent:"deleteClientEvent"},decls:7,vars:11,consts:[[1,"grid"],[1,"col-12"],["styleClass","shadow-3 mt-5 text-indigo-400","header","Clientes"],["dataKey","id","currentPageReportTemplate","Mostrando {first} de {last} de {totalRecords} clientes",3,"value","rows","paginator","responsive","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","selectionChange"],["usersTable",""],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","id"],[1,"flex","justify-content-between","align-itens-center"],["field","id"],["type","text","field","id","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","nome"],["field","nome"],["type","text","field","nome","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","telefone"],["field","telefone"],["type","text","field","telefone","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","rua"],["field","rua"],["type","text","field","rua","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","rg"],["field","rg"],["type","text","field","rg","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","cpf"],["field","cpf"],["type","text","field","cpf","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","complemento"],["field","complemento"],["type","text","field","complemento","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","cidade"],["field","cidade"],["type","text","field","cidade","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],[1,"flex","justify-content-center"],["styleClass","p-button-info","icon","pi pi-plus","label","Novo","pTooltip","Cadastrar novo cliente","tooltipPosition","top",3,"onClick"],[4,"ngIf"],[1,"flex","justify-content-center","gap-3","align-itens-center","align-content-center"],["pButton","","pRipple","","icon","pi pi-pencil","pTooltip","Editar Cliente","tooltipPosition","top",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","pTooltip","Excluir Cliente","tooltipPosition","top",1,"p-button-rounded","p-button-danger",3,"click"],["pButton","","pRipple","","icon","pi pi-eye","pTooltip","Visualizar Cliente","tooltipPosition","top",1,"p-button-rounded","p-button-sucess",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p-card",2)(3,"p-table",3,4),e.NdJ("selectionChange",function(r){return n.clienteSelected=r}),e.YNc(5,ne,60,24,"ng-template",5),e.YNc(6,oe,22,8,"ng-template",6),e.qZA()()()()),2&i&&(e.xp6(3),e.Q6J("value",n.clientes)("rows",10)("paginator",!0)("responsive",!0)("globalFilterFields",e.DdM(9,le))("tableStyle",e.DdM(10,re))("selection",n.clienteSelected)("rowHover",!0)("showCurrentPageReport",!0))},dependencies:[u.O5,Z.Z,_.jx,f.Hq,f.zx,h.iA,h.lQ,h.fz,h.xl,x.u]})}return l})();const ae=function(){return{widith:"50vw"}},de=[{path:"",component:(()=>{class l{constructor(t,i,n,o,r,C){this.clienteService=t,this.clientDtransferService=i,this.router=n,this.messageService=o,this.confirmationService=r,this.dialogService=C,this.destroy$=new E.x,this.clientesList=[],this.sidebarVisible=!1}ngOnInit(){this.getServiceClientesDatas()}getServiceClientesDatas(){const t=this.clientDtransferService.getClientesDatas();t.length>0?this.clientesList=t:this.getAPIClientesDatas()}getAPIClientesDatas(){this.clienteService.findAll().pipe((0,c.R)(this.destroy$)).subscribe({next:t=>{this.clientesList=t},error:t=>{console.log(t),this.router.navigate(["home"]),this.messageService.add({severity:"error",summary:"Erro.",detail:"Erro ao buscar clientes",life:2500})}})}handleClientAction(t){t.action===p.CREATE_CLIENT_EVENT||t.action===p.EDIT_CLIENT_EVENT?(this.ref=this.dialogService.open(Q,{header:t?.action,width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0,data:{event:t,clientesList:this.clientesList}}),this.ref.onClose.pipe((0,c.R)(this.destroy$)).subscribe({next:()=>this.getAPIClientesDatas()})):this.handleViewClientAction(t)}handleOpenSidebar(){this.sidebarVisible=!this.sidebarVisible}handleDeleteClientAction(t){t&&this.confirmationService.confirm({message:`Deseja realmente deletar o usu\xe1rio ${t?.nome}?`,header:"Confirma\xe7\xe3o de exclus\xe3o",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"N\xe3o",accept:()=>this.deleteClient(t?.cli_id)})}handleViewClientAction(t){t&&this.clienteService.findById(t?.id).pipe((0,c.R)(this.destroy$)).subscribe({next:i=>{i&&(this.ref=this.dialogService.open(X,{header:t?.action,width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0,data:{cliente:i}}),this.ref.onClose.pipe((0,c.R)(this.destroy$)).subscribe({next:()=>this.getAPIClientesDatas()}))},error(i){console.log(i)}})}deleteClient(t){t&&this.clienteService.delete(t).pipe((0,c.R)(this.destroy$)).subscribe({next:i=>{this.getAPIClientesDatas(),this.messageService.add({severity:"success",summary:"Sucesso",detail:"Cliente Excluido com sucesso!",life:2500})},error:i=>{console.log(i),this.messageService.add({severity:"error",summary:"Erro",detail:`Erro ao excluir cliente ${i.error.error}`,life:2500})}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(i){return new(i||l)(e.Y36(y),e.Y36(S),e.Y36(v.F0),e.Y36(_.ez),e.Y36(_.YP),e.Y36(m.xA))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-clientes-home"]],decls:4,vars:5,consts:[[3,"openSidebarEvent"],[3,"sidebarVisible"],[3,"clientes","clienteEvent","deleteClientEvent"]],template:function(i,n){1&i&&(e.TgZ(0,"app-toolbar",0),e.NdJ("openSidebarEvent",function(){return n.handleOpenSidebar()}),e.qZA(),e._UZ(1,"app-side-bar",1),e.TgZ(2,"app-clientes-table",2),e.NdJ("clienteEvent",function(r){return n.handleClientAction(r)})("deleteClientEvent",function(r){return n.handleDeleteClientAction(r)}),e.qZA(),e._UZ(3,"p-confirmDialog")),2&i&&(e.xp6(1),e.Q6J("sidebarVisible",n.sidebarVisible),e.xp6(1),e.Q6J("clientes",n.clientesList),e.xp6(1),e.Akn(e.DdM(4,ae)))},dependencies:[ee.n,te.P,A.Q,se]})}return l})()}];var ce=s(6208);let pe=(()=>{class l{static#e=this.\u0275fac=function(i){return new(i||l)};static#t=this.\u0275mod=e.oAB({type:l});static#n=this.\u0275inj=e.cJS({providers:[m.xA,_.YP,u.uU],imports:[u.ez,a.u5,a.UX,v.Bz.forChild(de),ce.m,g.JF,Z.d,b.cc,f.hJ,h.U$,M.zz,P.Iu,I.j,N.A,w.L$,m.DL,F.kW,A.D,x.z]})}return l})()}}]);