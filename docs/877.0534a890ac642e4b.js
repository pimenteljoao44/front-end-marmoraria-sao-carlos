"use strict";(self.webpackChunkmarmoraria_sao_carlos=self.webpackChunkmarmoraria_sao_carlos||[]).push([[877],{3877:(x,d,s)=>{s.r(d),s.d(d,{HomeModule:()=>T});var g=s(6814),t=s(6223),f=s(1365),e=s(4946),S=s(6530),m=s(5219),w=s(3574),l=s(459),c=s(707),u=s(7018),h=s(1312),p=s(3714),b=s(5226),P=s(3066);const E=[{path:"",component:(()=>{class i{constructor(r,o,a,n){this.userService=r,this.messageService=o,this.usersDtransfer=a,this.cookieService=n,this.sidebarVisible=!1,this.showSwitchPasswordModal=!1,this.userList=[],this.updatePasswordForm=new t.cw({newPassword:new t.NI("",[t.kI.required]),confirmNewPassword:new t.NI("",[t.kI.required])})}ngOnInit(){this.getUsersDatas(),this.cookieService.check("PASSWORD_RECOVERED")&&(this.showSwitchPasswordModal=!0,this.cookieService.delete("PASSWORD_RECOVERED"))}getUsersDatas(){this.userService.findAll().subscribe({next:r=>{r.length>0&&(this.userList=r,this.usersDtransfer.setUsersDatas(this.userList))},error:r=>{console.log(r),this.messageService.add({severity:"Error",summary:"Erro.",detail:"Erro ao buscar produtos",life:2500})}})}onSubmitUpdatePasswordForm(){if(this.updatePasswordForm.valid&&this.updatePasswordForm.value){const r=this.updatePasswordForm.value.newPassword;if(r!==this.updatePasswordForm.value.confirmNewPassword)return void this.messageService.add({severity:"error",summary:"Erro",detail:"As senhas n\xe3o coincidem",life:2500});this.userService.updatePassword(this.userList[0].id,r).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Sucesso",detail:"Senha alterada com sucesso",life:2500}),this.showSwitchPasswordModal=!1},error:a=>{console.log(a),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao alterar senha",life:2500})}})}}handleOpenSidebar(){this.sidebarVisible=!this.sidebarVisible}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(S.K),e.Y36(m.ez),e.Y36(w.q),e.Y36(l.N))};static#s=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-home"]],decls:16,vars:5,consts:[[3,"openSidebarEvent"],[3,"sidebarVisible"],[1,"center-container"],["src","./../../../../../assets/LogoMarmoraria.png","alt","Descri\xe7\xe3o da imagem"],["header","Bem-vindo!","width","300",3,"visible","modal","responsive","visibleChange"],[1,"forgot-password-form",3,"formGroup","ngSubmit"],[1,"flex","justify-content-center","align-content-center","text-align-center","mt-3"],["pInputText","","type","password","placeholder","Digite a nova senha","formControlName","newPassword"],["pInputText","","type","password","placeholder","Confirme a nova senha","formControlName","confirmNewPassword"],[1,"flex","justify-content-center","align-content-center","text-align-center","mt-3","ui-dialog-buttonpane","ui-helper-clearfix"],["pButton","","type","submit","label","Alterar Senha"]],template:function(o,a){1&o&&(e.TgZ(0,"app-toolbar",0),e.NdJ("openSidebarEvent",function(){return a.handleOpenSidebar()}),e.qZA(),e._UZ(1,"app-side-bar",1),e.TgZ(2,"div",2),e._UZ(3,"img",3),e.qZA(),e._UZ(4,"p-toast"),e.TgZ(5,"p-dialog",4),e.NdJ("visibleChange",function(U){return a.showSwitchPasswordModal=U}),e.TgZ(6,"p"),e._uU(7,"Recomendamos que voc\xea altere sua senha por quest\xe3o de seguran\xe7a."),e.qZA(),e.TgZ(8,"form",5),e.NdJ("ngSubmit",function(){return a.onSubmitUpdatePasswordForm()}),e.TgZ(9,"div",6),e._UZ(10,"input",7),e.qZA(),e._UZ(11,"br"),e.TgZ(12,"div",6),e._UZ(13,"input",8),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"button",10),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("sidebarVisible",a.sidebarVisible),e.xp6(4),e.Q6J("visible",a.showSwitchPasswordModal)("modal",!0)("responsive",!0),e.xp6(3),e.Q6J("formGroup",a.updatePasswordForm))},dependencies:[t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u,c.Hq,u.FN,h.V,p.o,b.n,P.P],styles:[".center-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}@media screen and (max-width: 600px){.center-container[_ngcontent-%COMP%]{padding:20px}}"]})}return i})()}];var v=s(9246),Z=s(6340),y=s(4532),C=s(6208);let T=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#s=this.\u0275mod=e.oAB({type:i});static#t=this.\u0275inj=e.cJS({providers:[l.N,m.ez],imports:[g.ez,t.u5,t.UX,f.Bz.forChild(E),v.l,c.hJ,Z.V,y.d,u.EV,h.S,p.j,v.l,C.m]})}return i})()}}]);