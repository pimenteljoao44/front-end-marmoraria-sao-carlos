"use strict";(self.webpackChunkmarmoraria_sao_carlos=self.webpackChunkmarmoraria_sao_carlos||[]).push([[271],{271:(he,C,s)=>{s.r(C),s.d(C,{FornecedoresModule:()=>pe});var u=s(6814),a=s(6223),F=s(1365),w=s(6208),g=s(9862),x=s(4532),T=s(1865),v=s(707),h=s(909),N=s(9663),P=s(5609),A=s(3714),O=s(6218),D=s(9653),m=s(5118),E=s(3866),Z=s(3904),I=s(3259),_=s(5219),y=s(8645),l=s(9773),p=function(i){return i.CREATE_FORNECEDOR_EVENT="Criar Fornecedor",i.EDIT_FORNECEDOR_EVENT="Editar Fornecedor",i.VIEW_FORNECEDOR_EVENT="Visualizar Fornecedor",i}(p||{}),e=s(4946),M=s(3004),J=s(2098),U=s(553),k=s(459);let S=(()=>{class i{constructor(o,r){this.httpClient=o,this.cookieService=r,this.baseUrl=U.N.baseUrl,this.JWT_TOKEN=this.cookieService.get("USER_INFO")}get httpOptions(){return{headers:new g.WM({"Content-Type":"application/json",Authorization:`Bearer ${this.JWT_TOKEN}`})}}findAll(){return this.httpClient.get(`${this.baseUrl}/fornecedores`,this.httpOptions)}findById(o){return this.httpClient.get(`${this.baseUrl}/fornecedores/${o}`,this.httpOptions)}create(o){return this.httpClient.post(`${this.baseUrl}/fornecedores`,o,this.httpOptions)}update(o){return this.httpClient.put(`${this.baseUrl}/fornecedores/${o?.id}`,o,this.httpOptions)}delete(o){return this.httpClient.delete(`${this.baseUrl}/fornecedores/${o}`,this.httpOptions)}static#e=this.\u0275fac=function(r){return new(r||i)(e.LFG(g.eN),e.LFG(k.N))};static#o=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var R=s(5619),q=s(8180);let b=(()=>{class i{constructor(){this.fornecedoresDataEmitter$=new R.X(null),this.fornecedoresDatas=[]}setFornecedoresDatas(o){o&&this.fornecedoresDataEmitter$.next(o)}getFornecedoresDataEmitter(){return this.fornecedoresDataEmitter$.asObservable()}getFornecedoresDatas(){return this.fornecedoresDataEmitter$.pipe((0,q.q)(1)).subscribe({next:o=>{o&&(this.fornecedoresDatas=o)}}),this.fornecedoresDatas}static#e=this.\u0275fac=function(r){return new(r||i)};static#o=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function V(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"input",22),e.NdJ("input",function(t){e.CHM(o);const n=e.oxw(2);return e.KtG(n.formatarCPF(t,n.addFornecedorForm))})("keyup",function(t){e.CHM(o);const n=e.oxw(2);return e.KtG(n.formatarCPF(t,n.addFornecedorForm))})("keydown",function(t){e.CHM(o);const n=e.oxw(2);return e.KtG(n.formatarCPF(t,n.addFornecedorForm))}),e.qZA()}}function $(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"input",23),e.NdJ("input",function(t){e.CHM(o);const n=e.oxw(2);return e.KtG(n.formatarRG(t,n.addFornecedorForm))})("keyup",function(t){e.CHM(o);const n=e.oxw(2);return e.KtG(n.formatarRG(t,n.addFornecedorForm))})("keydown",function(t){e.CHM(o);const n=e.oxw(2);return e.KtG(n.formatarRG(t,n.addFornecedorForm))}),e.qZA()}}function G(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"input",24),e.NdJ("input",function(t){e.CHM(o);const n=e.oxw(2);return e.KtG(n.formatarCNPJ(t,n.addFornecedorForm))})("keyup",function(t){e.CHM(o);const n=e.oxw(2);return e.KtG(n.formatarCNPJ(t,n.addFornecedorForm))})("keydown",function(t){e.CHM(o);const n=e.oxw(2);return e.KtG(n.formatarCNPJ(t,n.addFornecedorForm))}),e.qZA()}}function B(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"div")(1,"form",1),e.NdJ("ngSubmit",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.handleSubmitAddFornecedor())}),e.TgZ(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Pessoa F\xedsica"),e.qZA(),e.TgZ(6,"p-radioButton",5),e.NdJ("onClick",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.onTipoPessoaChange(t.addFornecedorForm))}),e.qZA(),e.TgZ(7,"label",6),e._uU(8,"Pessoa Jur\xeddica"),e.qZA(),e.TgZ(9,"p-radioButton",7),e.NdJ("onClick",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.onTipoPessoaChange(t.addFornecedorForm))}),e.qZA()(),e._UZ(10,"input",8)(11,"input",9),e.YNc(12,V,1,0,"input",10),e.YNc(13,$,1,0,"input",11),e.YNc(14,G,1,0,"input",12),e.TgZ(15,"div",13),e._UZ(16,"input",14)(17,"input",15)(18,"input",16)(19,"input",17),e.TgZ(20,"div",18)(21,"p-dropdown",19),e.NdJ("onChange",function(t){e.CHM(o);const n=e.oxw();return e.KtG(n.onCidadeChange(t.value))}),e.qZA()()(),e.TgZ(22,"div",20)(23,"button",21),e._uU(24,"Concluir"),e.qZA()()()()()}if(2&i){const o=e.oxw();let r,t,n;e.xp6(1),e.Q6J("formGroup",o.addFornecedorForm),e.xp6(11),e.Q6J("ngIf","PESSOA_FISICA"===(null==(r=o.addFornecedorForm.get("tipoPessoa"))?null:r.value)),e.xp6(1),e.Q6J("ngIf","PESSOA_FISICA"===(null==(t=o.addFornecedorForm.get("tipoPessoa"))?null:t.value)),e.xp6(1),e.Q6J("ngIf","PESSOA_JURIDICA"===(null==(n=o.addFornecedorForm.get("tipoPessoa"))?null:n.value)),e.xp6(7),e.Q6J("options",o.cidades)}}function j(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"input",22),e.NdJ("input",function(t){e.CHM(o);const n=e.oxw(2);return e.KtG(n.formatarCPF(t,n.editFornecedorForm))})("keyup",function(t){e.CHM(o);const n=e.oxw(2);return e.KtG(n.formatarCPF(t,n.editFornecedorForm))})("keydown",function(t){e.CHM(o);const n=e.oxw(2);return e.KtG(n.formatarCPF(t,n.editFornecedorForm))}),e.qZA()}}function H(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"input",23),e.NdJ("input",function(t){e.CHM(o);const n=e.oxw(2);return e.KtG(n.formatarRG(t,n.editFornecedorForm))})("keyup",function(t){e.CHM(o);const n=e.oxw(2);return e.KtG(n.formatarRG(t,n.editFornecedorForm))})("keydown",function(t){e.CHM(o);const n=e.oxw(2);return e.KtG(n.formatarRG(t,n.editFornecedorForm))}),e.qZA()}}function Y(i,c){1&i&&e._UZ(0,"input",26)}function Q(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"div")(1,"form",1),e.NdJ("ngSubmit",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.handleSubmitEditFornecedor())}),e.TgZ(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Pessoa F\xedsica"),e.qZA(),e.TgZ(6,"p-radioButton",5),e.NdJ("onClick",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.onTipoPessoaChange(t.editFornecedorForm))}),e.qZA(),e.TgZ(7,"label",6),e._uU(8,"Pessoa Jur\xeddica"),e.qZA(),e.TgZ(9,"p-radioButton",7),e.NdJ("onClick",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.onTipoPessoaChange(t.editFornecedorForm))}),e.qZA()(),e._UZ(10,"input",8)(11,"input",9),e.YNc(12,j,1,0,"input",10),e.YNc(13,H,1,0,"input",11),e.YNc(14,Y,1,0,"input",25),e.TgZ(15,"div",13),e._UZ(16,"input",14)(17,"input",15)(18,"input",16)(19,"input",17),e.TgZ(20,"div",18)(21,"p-dropdown",19),e.NdJ("onChange",function(t){e.CHM(o);const n=e.oxw();return e.KtG(n.onCidadeChange(t.value))}),e.qZA()()(),e.TgZ(22,"div",20)(23,"button",21),e._uU(24,"Concluir"),e.qZA()()()()()}if(2&i){const o=e.oxw();let r,t,n;e.xp6(1),e.Q6J("formGroup",o.editFornecedorForm),e.xp6(11),e.Q6J("ngIf","PESSOA_FISICA"===(null==(r=o.editFornecedorForm.get("tipoPessoa"))?null:r.value)),e.xp6(1),e.Q6J("ngIf","PESSOA_FISICA"===(null==(t=o.editFornecedorForm.get("tipoPessoa"))?null:t.value)),e.xp6(1),e.Q6J("ngIf","PESSOA_JURIDICA"===(null==(n=o.editFornecedorForm.get("tipoPessoa"))?null:n.value)),e.xp6(7),e.Q6J("options",o.cidades)}}let K=(()=>{class i{updateValidators(o){const r=o.get("tipoPessoa")?.value,t=o.get("cpf"),n=o.get("cnpj"),d=o.get("rg");t?.clearValidators(),n?.clearValidators(),d?.clearValidators(),"PESSOA_FISICA"===r?(t?.setValidators([a.kI.required,a.kI.pattern(/^\d{3}\.\d{3}\.\d{3}-\d{2}$/)]),n?.setValue(""),d?.setValue("")):"PESSOA_JURIDICA"===r&&(n?.setValidators([a.kI.required,a.kI.pattern(/^\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$/)]),t?.setValue(""),d?.setValue("")),t?.updateValueAndValidity(),n?.updateValueAndValidity(),d?.updateValueAndValidity()}formatarRG(o,r){const t=o.target.value.replace(/\D/g,"");let n="";n=t.length<=9?t.replace(/(\d{2})(\d{3})(\d{3})/,"$1.$2.$3"):t.substring(0,9),r.get("rg")?.setValue(n)}formatarCPF(o,r){const t=o.target.value.replace(/\D/g,"");let n="";n=t.length<=11?t.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):t.substring(0,14),r.get("cpf")?.setValue(n)}formatarCNPJ(o,r){const t=o.target.value.replace(/\D/g,"");let n="";n=t.length<=14?t.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):t.substring(0,18),r.get("cnpj")?.setValue(n)}onTipoPessoaChange(o){this.updateValidators(o)}onCidadeChange(o){this.cidadeService.findById(o).pipe((0,l.R)(this.destroy$)).subscribe({next:r=>{r&&(this.cidadeSelecionada=r)},error(r){console.log(r)}}),this.estadoService.findById(this.cidadeSelecionada?.estado?.id).subscribe({next:r=>{this.cidadeSelecionada.estado=r},error:r=>{console.error("Erro ao buscar o estado associado:",r)}})}constructor(o,r,t,n,d,f,ue,me,fe){this.formBuilder=o,this.messageService=r,this.router=t,this.estadoService=n,this.cidadeService=d,this.fornecedorService=f,this.ref=ue,this.datePipe=me,this.fornecedorDTO=fe,this.destroy$=new y.x,this.tipoPessoa=[{label:"Pessoa F\xedsica",value:"PESSOA_FISICA"},{label:"Pessoa Jur\xeddica",value:"PESSOA_JURIDICA"}],this.TipoPessoaSelected=[],this.fornecedorDatas=[],this.cidades=[],this.addFornecedorAction=p.CREATE_FORNECEDOR_EVENT,this.editFornecedorAction=p.EDIT_FORNECEDOR_EVENT,this.addFornecedorForm=this.formBuilder.group({nome:["",a.kI.required],telefone:["",a.kI.required],endereco:this.formBuilder.group({rua:["",a.kI.required],numero:["",a.kI.required],complemento:[""],bairro:["",a.kI.required],cidade:this.formBuilder.group({cidId:[null,a.kI.required],nome:["",a.kI.required],estado:this.formBuilder.group({id:[null],nome:[""],sigla:[""],cidades:[[]],dataCriacao:[this.getDate()],dataAtualizacao:[""]})})}),cpf:[""],rg:[""],cnpj:[""],tipoPessoa:["PESSOA_FISICA",a.kI.required],dataCriacao:[this.getDate(),a.kI.required],dataAtualizacao:[""]}),this.editFornecedorForm=this.formBuilder.group({id:[null],nome:["",a.kI.required],telefone:["",a.kI.required],endereco:this.formBuilder.group({rua:["",a.kI.required],numero:["",a.kI.required],complemento:[""],bairro:["",a.kI.required],cidade:this.formBuilder.group({cidId:[null,a.kI.required],nome:["",a.kI.required],estado:this.formBuilder.group({id:[null],nome:[""],sigla:[""],cidades:[[]],dataCriacao:[this.getDate()],dataAtualizacao:[""]})})}),cpf:[""],rg:[""],cnpj:[""],tipoPessoa:["PESSOA_FISICA",a.kI.required],dataCriacao:[this.getDate()],dataAtualizacao:[""]})}ngOnInit(){if(this.onTipoPessoaChange(this.addFornecedorForm),this.onTipoPessoaChange(this.editFornecedorForm),this.fornecedorAction=this.ref.data,this.fornecedorAction?.event.action===this.editFornecedorAction&&this.fornecedorAction?.fornecedoresList){const o=this.fornecedorAction?.event?.id;this.getFornecedorSelectedDatas(o),this.setCidadeNosFormularios(this.cidadeSelecionada),this.updateValidators(this.editFornecedorForm)}this.getCidades()}setCidadeNosFormularios(o){const r=this.addFornecedorForm.get("endereco"),t=this.editFornecedorForm.get("endereco"),n=o.cidId;r.get("cidade.cidId")?.setValue(n),r.get("cidade.nome")?.setValue(o?.nome),r.get("cidade.estado.id")?.setValue(o?.estado?.id),t.get("cidade.cidId")?.setValue(n),t.get("cidade.nome")?.setValue(o?.nome),t.get("cidade.estado.id")?.setValue(o?.estado?.id);const d=this.getDate();r.get("cidade.estado.dataCriacao")?.setValue(d),t.get("cidade.estado.dataCriacao")?.setValue(d)}getDate(){return this.datePipe.transform(new Date,"dd/MM/yyyy HH:mm")||""}getCidades(){this.cidadeService.findAll().pipe((0,l.R)(this.destroy$)).subscribe({next:o=>{o.length>0&&(this.cidades=o,this.cidades.length>0&&(this.cidadeSelecionada=this.cidades[0],this.setCidadeNosFormularios(this.cidadeSelecionada)))},error:o=>{console.log(o)}})}handleSubmitAddFornecedor(){const o=[];if(Object.keys(this.addFornecedorForm.controls).forEach(r=>{const t=this.addFornecedorForm.get(r);t&&t.invalid&&o.push(r)}),o.length>0){const r=`Os campos ${o.join(", ")} est\xe3o inv\xe1lidos.`;return this.markFormGroupTouched(this.addFornecedorForm),void this.messageService.add({severity:"warn",summary:"Aviso",detail:r,life:3e3})}this.fornecedorService.create(this.addFornecedorForm.value).pipe((0,l.R)(this.destroy$)).subscribe({next:r=>{r&&(this.addFornecedorForm.reset(),this.messageService.add({severity:"success",summary:"Sucesso",detail:`O fornecedor ${r.nome} foi criado com sucesso!`,life:2e3}))},error:r=>{console.error("Erro durante a solicita\xe7\xe3o:",r),"Fornecedor j\xe1 cadastrado na base de dados!"!==r.error.error?(this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao criar Fornecedor.",life:2e3}),console.log(r)):this.messageService.add({severity:"error",summary:"Erro",detail:r.error.error,life:2e3})}})}handleSubmitEditFornecedor(){const o=[];if(Object.keys(this.editFornecedorForm.controls).forEach(d=>{const f=this.editFornecedorForm.get(d);f&&f.invalid&&o.push(d)}),o.length>0){const d=`Os campos ${o.join(", ")} est\xe3o inv\xe1lidos.`;return this.markFormGroupTouched(this.editFornecedorForm),void this.messageService.add({severity:"warn",summary:"Aviso",detail:d,life:3e3})}this.setCidadeNosFormularios(this.cidadeSelecionada);const r=this.datePipe.transform(new Date,"dd/MM/yyyy HH:mm"),t=this.editFornecedorForm.value.endereco;this.fornecedorService.update({id:this.fornecedorAction.event.id,nome:this.editFornecedorForm.value.nome,telefone:this.editFornecedorForm.value.telefone,endereco:{rua:t.rua,numero:t.numero,complemento:t.complemento,bairro:t.bairro,cidade:{cidId:this.cidadeSelecionada.cidId}},cpf:this.editFornecedorForm.value.cpf,rg:this.editFornecedorForm.value.rg,cnpj:this.editFornecedorForm.value.cnpj,tipoPessoa:this.editFornecedorForm.value.tipoPessoa,dataCriacao:this.editFornecedorForm.value.dataCriacao,dataAtualizacao:null!==r?r:void 0}).pipe((0,l.R)(this.destroy$)).subscribe({next:d=>{d&&(this.messageService.add({severity:"success",summary:"Sucesso",detail:"O fornecedor foi editado com sucesso!",life:2e3}),this.editFornecedorForm.reset())},error:d=>{console.log(d),this.messageService.add({severity:"error",summary:"Erro",detail:`Erro ao editar fornecedor, ${d.error.error}`,life:2e3})}})}markFormGroupTouched(o){Object.values(o.controls).forEach(r=>{r instanceof a.cw?this.markFormGroupTouched(r):r.markAsTouched()})}getFornecedorSelectedDatas(o){const r=this.fornecedorAction.fornecedoresList;if(r.length>0){const t=r.find(n=>n?.id===o);t&&(this.fornecedorSelectedDatas=t,this.cidadeSelecionada=t.endereco.cidade,this.editFornecedorForm.patchValue({id:t.id,nome:t.nome,telefone:t.telefone,cpf:t.cpf,rg:t.rg,cnpj:t.cnpj,tipoPessoa:t.tipoPessoa,dataCriacao:t.dataCriacao,dataAtualizacao:t.dataAtualizacao,endereco:{rua:t.endereco.rua,numero:t.endereco.numero,complemento:t.endereco.complemento,bairro:t.endereco.bairro,cidade:{cidId:t.endereco.cidade.cidId}}}),this.editFornecedorForm.updateValueAndValidity())}}setUserDatas(){this.fornecedorService.findAll().pipe((0,l.R)(this.destroy$)).subscribe({next:o=>{o.length>0&&(this.fornecedorDatas=o,this.fornecedorDatas&&this.fornecedorDTO.setFornecedoresDatas(this.fornecedorDatas))}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(a.qu),e.Y36(_.ez),e.Y36(F.F0),e.Y36(M.s),e.Y36(J.F),e.Y36(S),e.Y36(m.S),e.Y36(u.uU),e.Y36(b))};static#o=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-fornecedores-form"]],decls:2,vars:2,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"card","flex","flex-column","md:flex-column","gap-3"],[1,"p-field","flex","flex-row","justify-content-center","align-items-center","align-content-center","m-1"],["for","pessoaFisica",1,"mr-3"],["inputId","pessoaFisica","name","tipoPessoa","value","PESSOA_FISICA","formControlName","tipoPessoa",1,"mr-5","p-radiobutton",3,"onClick"],["for","pessoaJuridica",1,"mr-3"],["inputId","pessoaJuridica","name","tipoPessoa","value","PESSOA_JURIDICA","formControlName","tipoPessoa",1,"p-radiobutton",3,"onClick"],["pInputText","","placeholder","Nome","formControlName","nome"],["pInputText","","placeholder","Telefone","formControlName","telefone"],["pInputText","","placeholder","CPF","formControlName","cpf",3,"input","keyup","keydown",4,"ngIf"],["pInputText","","placeholder","RG","formControlName","rg",3,"input","keyup","keydown",4,"ngIf"],["pInputText","","placeholder","CNPJ","formControlName","cnpj",3,"input","keyup","keydown",4,"ngIf"],["formGroupName","endereco"],["pInputText","","placeholder","Rua","formControlName","rua"],["pInputText","","placeholder","N\xfamero","formControlName","numero"],["pInputText","","placeholder","Complemento","formControlName","complemento"],["pInputText","","placeholder","Bairro","formControlName","bairro"],["formGroupName","cidade"],["styleClass","w-full","placeholder","Selecione a cidade","formControlName","cidId","optionLabel","nome","optionValue","cidId",3,"options","onChange"],[1,"flex","flex-row","justify-content-center","align-items-center","align-content-center","m-1"],["type","submit",1,"p-button"],["pInputText","","placeholder","CPF","formControlName","cpf",3,"input","keyup","keydown"],["pInputText","","placeholder","RG","formControlName","rg",3,"input","keyup","keydown"],["pInputText","","placeholder","CNPJ","formControlName","cnpj",3,"input","keyup","keydown"],["pInputText","","placeholder","CNPJ","formControlName","cnpj",4,"ngIf"],["pInputText","","placeholder","CNPJ","formControlName","cnpj"]],template:function(r,t){1&r&&(e.YNc(0,B,25,5,"div",0),e.YNc(1,Q,25,5,"div",0)),2&r&&(e.Q6J("ngIf",t.fornecedorAction.event.action===t.addFornecedorAction),e.xp6(1),e.Q6J("ngIf",t.fornecedorAction.event.action===t.editFornecedorAction))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,a.x0,T.EU,A.o,E.Lt]})}return i})();function z(i,c){if(1&i&&(e.TgZ(0,"div",2)(1,"strong"),e._uU(2,"CPF:"),e.qZA(),e._uU(3),e.qZA()),2&i){const o=e.oxw(2);e.xp6(3),e.hij(" ",o.fornecedor.cpf," ")}}function L(i,c){if(1&i&&(e.TgZ(0,"div",2)(1,"strong"),e._uU(2,"RG:"),e.qZA(),e._uU(3),e.qZA()),2&i){const o=e.oxw(2);e.xp6(3),e.hij(" ",o.fornecedor.rg," ")}}function W(i,c){if(1&i&&(e.TgZ(0,"div",2)(1,"strong"),e._uU(2,"CNPJ:"),e.qZA(),e._uU(3),e.qZA()),2&i){const o=e.oxw(2);e.xp6(3),e.hij(" ",o.fornecedor.cnpj," ")}}function X(i,c){if(1&i&&(e.TgZ(0,"div",1)(1,"div",2)(2,"strong"),e._uU(3,"ID:"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"div",2)(6,"strong"),e._uU(7,"Tipo:"),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"div",2)(10,"strong"),e._uU(11,"Nome:"),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"div",2)(14,"strong"),e._uU(15,"Telefone:"),e.qZA(),e._uU(16),e.qZA(),e.TgZ(17,"div",2)(18,"strong"),e._uU(19,"Endere\xe7o:"),e.qZA(),e._uU(20),e.qZA(),e.YNc(21,z,4,1,"div",3),e.YNc(22,L,4,1,"div",3),e.YNc(23,W,4,1,"div",3),e.qZA()),2&i){const o=e.oxw();e.xp6(4),e.hij(" ",o.fornecedor.id," "),e.xp6(4),e.hij(" ","PESSOA_FISICA"===o.fornecedor.tipoPessoa?"Pessoa F\xedsica":"Pessoa Jur\xeddica"," "),e.xp6(4),e.hij(" ",o.fornecedor.nome," "),e.xp6(4),e.hij(" ",o.fornecedor.telefone," "),e.xp6(4),e.gL8(" ",o.fornecedor.endereco.rua,", ",o.fornecedor.endereco.numero," - ",o.fornecedor.endereco.complemento,", ",o.fornecedor.endereco.bairro,", ",o.fornecedor.endereco.cidade.nome,", ",null==o.fornecedor.endereco.cidade.estado?null:o.fornecedor.endereco.cidade.estado.nome," "),e.xp6(1),e.Q6J("ngIf","PESSOA_FISICA"===o.fornecedor.tipoPessoa),e.xp6(1),e.Q6J("ngIf","PESSOA_FISICA"===o.fornecedor.tipoPessoa),e.xp6(1),e.Q6J("ngIf","PESSOA_JURIDICA"===o.fornecedor.tipoPessoa)}}let ee=(()=>{class i{constructor(o,r){this.ref=o,this.config=r}ngOnInit(){this.fornecedor=this.config.data.fornecedor}close(){this.ref.close()}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(m.E7),e.Y36(m.S))};static#o=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-fornecedores-view"]],decls:1,vars:1,consts:[["class","p-grid p-dir-col",4,"ngIf"],[1,"p-grid","p-dir-col"],[1,"p-col"],["class","p-col",4,"ngIf"]],template:function(r,t){1&r&&e.YNc(0,X,24,13,"div",0),2&r&&e.Q6J("ngIf",t.fornecedor)},dependencies:[u.O5]})}return i})();var oe=s(5226),te=s(3066);function re(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"tr")(1,"th",7)(2,"div",8)(3,"div",8),e._uU(4," ID "),e.qZA(),e.TgZ(5,"div",8),e._UZ(6,"p-sortIcon",9)(7,"p-columnFilter",10),e.qZA()()(),e.TgZ(8,"th",11)(9,"div",8)(10,"div",8),e._uU(11," Nome "),e.qZA(),e.TgZ(12,"div",8),e._UZ(13,"p-sortIcon",12)(14,"p-columnFilter",13),e.qZA()()(),e.TgZ(15,"th",14)(16,"div",8)(17,"div",8),e._uU(18," Telefone "),e.qZA(),e.TgZ(19,"div",8),e._UZ(20,"p-sortIcon",15)(21,"p-columnFilter",16),e.qZA()()(),e.TgZ(22,"th",17)(23,"div",8)(24,"div",8),e._uU(25," Rua "),e.qZA(),e.TgZ(26,"div",8),e._UZ(27,"p-sortIcon",18)(28,"p-columnFilter",19),e.qZA()()(),e.TgZ(29,"th",20)(30,"div",8)(31,"div",8),e._uU(32," RG "),e.qZA(),e.TgZ(33,"div",8),e._UZ(34,"p-sortIcon",21)(35,"p-columnFilter",22),e.qZA()()(),e.TgZ(36,"th",23)(37,"div",8)(38,"div",8),e._uU(39," CPF "),e.qZA(),e.TgZ(40,"div",8),e._UZ(41,"p-sortIcon",24)(42,"p-columnFilter",25),e.qZA()()(),e.TgZ(43,"th",26)(44,"div",8)(45,"div",8),e._uU(46," Complemento "),e.qZA(),e.TgZ(47,"div",8),e._UZ(48,"p-sortIcon",27)(49,"p-columnFilter",28),e.qZA()()(),e.TgZ(50,"th",29)(51,"div",8)(52,"div",8),e._uU(53," Cidade "),e.qZA(),e.TgZ(54,"div",8),e._UZ(55,"p-sortIcon",30)(56,"p-columnFilter",31),e.qZA()()(),e.TgZ(57,"th")(58,"div",32)(59,"p-button",33),e.NdJ("onClick",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.handleFornecedorvent(t.createFornecedorEvent))}),e.qZA()()()()}2&i&&(e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1))}function ne(i,c){if(1&i&&(e.ynx(0),e._uU(1),e._UZ(2,"br"),e.BQk()),2&i){const o=e.oxw().$implicit;e.xp6(1),e.HOy(" ",null==o||null==o.endereco?null:o.endereco.rua," ",null==o||null==o.endereco?null:o.endereco.numero," ",null==o||null==o.endereco?null:o.endereco.complemento," ",null==o||null==o.endereco?null:o.endereco.bairro," ")}}function ie(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e.YNc(8,ne,3,4,"ng-container",34),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td")(18,"div",35)(19,"button",36),e.NdJ("click",function(){const n=e.CHM(o).$implicit,d=e.oxw();return e.KtG(d.handleFornecedorvent(d.editFornecedorEvent,null==n?null:n.id))}),e.qZA(),e.TgZ(20,"button",37),e.NdJ("click",function(){const n=e.CHM(o).$implicit,d=e.oxw();return e.KtG(d.handleDeleteFornecedor(null==n?null:n.id,null==n?null:n.nome))}),e.qZA(),e.TgZ(21,"button",38),e.NdJ("click",function(){const n=e.CHM(o).$implicit,d=e.oxw();return e.KtG(d.handleFornecedorvent(d.viewFornecedorvent,null==n?null:n.id))}),e.qZA()()()()}if(2&i){const o=c.$implicit;e.xp6(2),e.Oqu(null==o?null:o.id),e.xp6(2),e.Oqu(null==o?null:o.nome),e.xp6(2),e.Oqu(null==o?null:o.telefone),e.xp6(2),e.Q6J("ngIf",null!==(null==o?null:o.endereco)),e.xp6(2),e.Oqu(null==o?null:o.rg),e.xp6(2),e.Oqu(null==o?null:o.cpf),e.xp6(2),e.Oqu(null==o||null==o.endereco?null:o.endereco.complemento),e.xp6(2),e.Oqu(null==o||null==o.endereco||null==o.endereco.cidade?null:o.endereco.cidade.nome)}}const de=function(){return["nome","rua","cpf","rg","cidade","complemento"]},se=function(){return{"min-width":"75rem"}};let ae=(()=>{class i{constructor(){this.fornecedores=[],this.fornecedorEvent=new e.vpe,this.deleteFornecedorEvent=new e.vpe,this.createFornecedorEvent=p.CREATE_FORNECEDOR_EVENT,this.editFornecedorEvent=p.EDIT_FORNECEDOR_EVENT,this.viewFornecedorvent=p.VIEW_FORNECEDOR_EVENT}handleFornecedorvent(o,r){void 0!==o&&""!==o&&this.fornecedorEvent.emit(r&&null!==r?{action:o,id:r}:{action:o})}handleDeleteFornecedor(o,r){o&&null!==o&&this.deleteFornecedorEvent.emit({for_id:o,nome:r})}static#e=this.\u0275fac=function(r){return new(r||i)};static#o=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-fornecedores-table"]],inputs:{fornecedores:"fornecedores"},outputs:{fornecedorEvent:"fornecedorEvent",deleteFornecedorEvent:"deleteFornecedorEvent"},decls:7,vars:11,consts:[[1,"grid"],[1,"col-12"],["styleClass","shadow-3 mt-5 text-indigo-400","header","Fornecedores"],["dataKey","id","currentPageReportTemplate","Mostrando {first} de {last} de {totalRecords} fornecedores",3,"value","rows","paginator","responsive","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","selectionChange"],["usersTable",""],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","id"],[1,"flex","justify-content-between","align-itens-center"],["field","id"],["type","text","field","id","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","nome"],["field","nome"],["type","text","field","nome","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","telefone"],["field","telefone"],["type","text","field","telefone","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","rua"],["field","rua"],["type","text","field","rua","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","rg"],["field","rg"],["type","text","field","rg","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","cpf"],["field","cpf"],["type","text","field","cpf","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","complemento"],["field","complemento"],["type","text","field","complemento","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","cidade"],["field","cidade"],["type","text","field","cidade","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],[1,"flex","justify-content-center"],["styleClass","p-button-info","icon","pi pi-plus","label","Novo","pTooltip","Cadastrar novo fornecedor","tooltipPosition","top",3,"onClick"],[4,"ngIf"],[1,"flex","justify-content-center","gap-3","align-itens-center","align-content-center"],["pButton","","pRipple","","icon","pi pi-pencil","pTooltip","Editar fornecedor","tooltipPosition","top",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","pTooltip","Excluir fornecedor","tooltipPosition","top",1,"p-button-rounded","p-button-danger",3,"click"],["pButton","","pRipple","","icon","pi pi-eye","pTooltip","Visualizar fornecedor","tooltipPosition","top",1,"p-button-rounded","p-button-sucess",3,"click"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p-card",2)(3,"p-table",3,4),e.NdJ("selectionChange",function(d){return t.fornecedorSelected=d}),e.YNc(5,re,60,24,"ng-template",5),e.YNc(6,ie,22,8,"ng-template",6),e.qZA()()()()),2&r&&(e.xp6(3),e.Q6J("value",t.fornecedores)("rows",10)("paginator",!0)("responsive",!0)("globalFilterFields",e.DdM(9,de))("tableStyle",e.DdM(10,se))("selection",t.fornecedorSelected)("rowHover",!0)("showCurrentPageReport",!0))},dependencies:[u.O5,x.Z,_.jx,v.Hq,v.zx,h.iA,h.lQ,h.fz,h.xl,I.u]})}return i})();const ce=function(){return{widith:"50vw"}},le=[{path:"",component:(()=>{class i{constructor(o,r,t,n,d,f){this.fornecedorService=o,this.fornecedorDtransferService=r,this.router=t,this.messageService=n,this.confirmationService=d,this.dialogService=f,this.destroy$=new y.x,this.fornecedoresList=[],this.sidebarVisible=!1}ngOnInit(){this.getServiceFornecedoresDatas()}getServiceFornecedoresDatas(){const o=this.fornecedorDtransferService.getFornecedoresDatas();o.length>0?this.fornecedoresList=o:this.getAPIFornecedoresDatas()}getAPIFornecedoresDatas(){this.fornecedorService.findAll().pipe((0,l.R)(this.destroy$)).subscribe({next:o=>{this.fornecedoresList=o},error:o=>{console.log(o),this.router.navigate(["home"]),this.messageService.add({severity:"error",summary:"Erro.",detail:"Erro ao buscar Fornecedores",life:2500})}})}handleFornecedorAction(o){o.action===p.CREATE_FORNECEDOR_EVENT||o.action===p.EDIT_FORNECEDOR_EVENT?(this.ref=this.dialogService.open(K,{header:o?.action,width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0,data:{event:o,fornecedoresList:this.fornecedoresList}}),this.ref.onClose.pipe((0,l.R)(this.destroy$)).subscribe({next:()=>this.getAPIFornecedoresDatas()})):this.handleViewFornecedorAction(o)}handleOpenSidebar(){this.sidebarVisible=!this.sidebarVisible}handleDeleteFornecedorAction(o){o&&this.confirmationService.confirm({message:`Deseja realmente deletar o fornecedor ${o?.nome}?`,header:"Confirma\xe7\xe3o de exclus\xe3o",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"N\xe3o",accept:()=>this.deleteClient(o?.for_id)})}handleViewFornecedorAction(o){o&&this.fornecedorService.findById(o?.id).pipe((0,l.R)(this.destroy$)).subscribe({next:r=>{r&&(this.ref=this.dialogService.open(ee,{header:o?.action,width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0,data:{fornecedor:r}}),this.ref.onClose.pipe((0,l.R)(this.destroy$)).subscribe({next:()=>this.getAPIFornecedoresDatas()}))},error(r){console.log(r)}})}deleteClient(o){o&&this.fornecedorService.delete(o).pipe((0,l.R)(this.destroy$)).subscribe({next:r=>{this.getAPIFornecedoresDatas(),this.messageService.add({severity:"success",summary:"Sucesso",detail:"Fornecedor Excluido com sucesso!",life:2500})},error:r=>{console.log(r),this.messageService.add({severity:"error",summary:"Erro",detail:`Erro ao excluir Fornecedor ${r.error.error}`,life:2500})}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(S),e.Y36(b),e.Y36(F.F0),e.Y36(_.ez),e.Y36(_.YP),e.Y36(m.xA))};static#o=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-fornecedores-home"]],decls:4,vars:5,consts:[[3,"openSidebarEvent"],[3,"sidebarVisible"],[3,"fornecedores","fornecedorEvent","deleteFornecedorEvent"]],template:function(r,t){1&r&&(e.TgZ(0,"app-toolbar",0),e.NdJ("openSidebarEvent",function(){return t.handleOpenSidebar()}),e.qZA(),e._UZ(1,"app-side-bar",1),e.TgZ(2,"app-fornecedores-table",2),e.NdJ("fornecedorEvent",function(d){return t.handleFornecedorAction(d)})("deleteFornecedorEvent",function(d){return t.handleDeleteFornecedorAction(d)}),e.qZA(),e._UZ(3,"p-confirmDialog")),2&r&&(e.xp6(1),e.Q6J("sidebarVisible",t.sidebarVisible),e.xp6(1),e.Q6J("fornecedores",t.fornecedoresList),e.xp6(1),e.Akn(e.DdM(4,ce)))},dependencies:[oe.n,te.P,Z.Q,ae]})}return i})()}];let pe=(()=>{class i{static#e=this.\u0275fac=function(r){return new(r||i)};static#o=this.\u0275mod=e.oAB({type:i});static#t=this.\u0275inj=e.cJS({providers:[m.xA,_.YP,u.uU],imports:[u.ez,a.u5,a.UX,F.Bz.forChild(le),w.m,g.JF,x.d,T.cc,v.hJ,h.U$,N.zz,P.Iu,A.j,O.A,D.L$,m.DL,E.kW,Z.D,I.z]})}return i})()}}]);